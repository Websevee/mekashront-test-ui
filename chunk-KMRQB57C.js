import{a as M,b as h,c as P,d as L,e as O,f as k,g as S,h as E,i as I,j as R}from"./chunk-ZKASPVKC.js";import{D as m,F as l,H as i,I as o,J as s,K as f,L as c,M as d,N as v,P as b,U as x,V as _,W as C,aa as y,ea as w,w as a,y as g,z as p}from"./chunk-ABJYYEFY.js";var F=r=>({"is-invalid":r});function q(r,e){r&1&&(i(0,"div"),d(1,"Username is required"),o())}function G(r,e){if(r&1&&(i(0,"div",19),s(1,"i",20),m(2,q,2,0,"div",21),o()),r&2){let n=c();a(2),l("ngIf",n.f.username.errors.required)}}function B(r,e){r&1&&(i(0,"div"),d(1,"Password is required"),o())}function A(r,e){if(r&1&&(i(0,"div",19),s(1,"i",20),m(2,B,2,0,"div",21),o()),r&2){let n=c();a(2),l("ngIf",n.f.password.errors.required)}}function Y(r,e){if(r&1&&(i(0,"div",22),s(1,"i",23),d(2),o()),r&2){let n=c();a(2),v(" ",n.error," ")}}function j(r,e){if(r&1&&(i(0,"div",24),s(1,"i",25),d(2),o()),r&2){let n=c();a(2),v(" ",n.successMessage," ")}}var u=class r{constructor(e,n,t){this.formBuilder=e;this.authService=n;this.router=t}loginForm;submitted=!1;error="";successMessage="";ngOnInit(){this.loginForm=this.formBuilder.group({username:["",h.required],password:["",h.required]})}get f(){return this.loginForm.controls}onSubmit(){if(this.submitted=!0,this.loginForm.invalid)return;let{username:e,password:n}=this.loginForm.value;this.login(e,n)}login(e,n){this.error="",this.successMessage="",this.authService.loginSoap(e,n).subscribe({next:t=>{this.isLoginResponse(t)?this.handleLoginSuccess(t):this.isErrorResponse(t)?this.handleError(t):t===null?this.handleNullResponse():this.handleUnexpectedResponse(t)},error:t=>{this.error="Login error. Please try again.",console.error("Login HTTP error:",t)}})}isLoginResponse(e){return e&&typeof e=="object"&&"EntityId"in e&&typeof e.EntityId=="number"}isErrorResponse(e){return e&&typeof e=="object"&&"ResultCode"in e&&typeof e.ResultCode=="number"}handleLoginSuccess(e){console.log("Login successful:",e),this.successMessage=`Welcome, ${e.FirstName} ${e.LastName}. You have successfully logged in!`}handleError(e){console.log("Login error:",e),e.ResultMessage==="User not found"?this.error="Invalid username or password":this.error=e.ResultMessage}handleNullResponse(){this.error="Invalid username or password"}handleUnexpectedResponse(e){this.error="Unexpected response format",console.error("Unexpected response type:",e)}static \u0275fac=function(n){return new(n||r)(g(E),g(R),g(y))};static \u0275cmp=p({type:r,selectors:[["app-login"]],decls:26,vars:11,consts:[[1,"row","justify-content-center","login-container"],[1,"col-md-6","col-lg-5"],[1,"card","login-card","shadow"],[1,"card-body","p-5"],[1,"text-center","mb-4","login-title"],[3,"ngSubmit","formGroup"],[1,"mb-3","form-group"],["for","username",1,"form-label"],[1,"fas","fa-user"],["type","text","id","username","formControlName","username","placeholder","Enter username",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","password",1,"form-label"],[1,"fas","fa-lock"],["type","password","id","password","formControlName","password","placeholder","Enter password",1,"form-control",3,"ngClass"],[1,"d-grid","gap-2","mb-3"],["type","submit",1,"btn","btn-login"],["type","button",1,"btn","btn-register",3,"click"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"invalid-feedback"],[1,"fas","fa-exclamation-circle"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle"],["role","alert",1,"alert","alert-success"],[1,"fas","fa-check-circle"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),d(5,"Login"),o(),i(6,"form",5),f("ngSubmit",function(){return t.onSubmit()}),i(7,"div",6)(8,"label",7),s(9,"i",8),d(10," Username "),o(),s(11,"input",9),m(12,G,3,1,"div",10),o(),i(13,"div",6)(14,"label",11),s(15,"i",12),d(16," Password "),o(),s(17,"input",13),m(18,A,3,1,"div",10),o(),i(19,"div",14)(20,"button",15),d(21,"Login"),o(),i(22,"button",16),f("click",function(){return t.router.navigate(["/auth/register"])}),d(23,"No account? Register"),o()(),m(24,Y,3,1,"div",17)(25,j,3,1,"div",18),o()()()()()),n&2&&(a(6),l("formGroup",t.loginForm),a(5),l("ngClass",b(7,F,t.submitted&&t.f.username.errors)),a(),l("ngIf",t.submitted&&t.f.username.errors),a(5),l("ngClass",b(9,F,t.submitted&&t.f.password.errors)),a(),l("ngIf",t.submitted&&t.f.password.errors),a(6),l("ngIf",t.error),a(),l("ngIf",t.successMessage))},dependencies:[I,O,M,P,L,k,S,C,x,_,w],styles:['.login-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:calc(100vh - 10%);padding:3rem 1rem}.login-card[_ngcontent-%COMP%]{background:var(--dark-bg-secondary);border:1px solid rgba(106,17,203,.2);box-shadow:var(--shadow-primary),var(--glow-primary);border-radius:15px;overflow:hidden;width:100%;max-width:450px;transition:var(--transition-medium);animation:float-animation 6s ease-in-out infinite}.login-card[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-glow),var(--glow-secondary)}.card-body[_ngcontent-%COMP%]{padding:3rem!important;background:linear-gradient(135deg,#1a1a2eb3,#121220e6)}.login-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:2rem;text-align:center;background:linear-gradient(90deg,var(--gradient-primary-start),var(--gradient-accent-end));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:var(--glow-primary)}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:500;margin-bottom:.5rem;display:flex;align-items:center}.form-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:var(--gradient-accent-start)}.form-control[_ngcontent-%COMP%]{background-color:var(--dark-bg-tertiary);border:1px solid rgba(106,17,203,.3);color:var(--text-primary);border-radius:10px;padding:.75rem 1rem;transition:var(--transition-fast);height:auto}.form-control[_ngcontent-%COMP%]:focus{background-color:var(--dark-bg-secondary);border-color:var(--gradient-accent-start);box-shadow:var(--glow-accent);color:var(--text-primary)}.form-control[_ngcontent-%COMP%]::placeholder{color:#b0b0c099}.invalid-feedback[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.875rem;margin-top:.25rem;display:flex;align-items:center}.invalid-feedback[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.25rem;animation:none}.btn-login[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--gradient-primary-start),var(--gradient-primary-end));border:none;box-shadow:var(--glow-primary);color:#fff;font-weight:600;padding:.75rem;border-radius:10px;transition:var(--transition-medium);margin-bottom:1rem;position:relative;overflow:hidden}.btn-login[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--gradient-secondary-start),var(--gradient-secondary-end));box-shadow:var(--glow-secondary);transform:translateY(-3px)}.btn-login[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-login[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:#ffffff1a;transform:rotate(30deg);transition:var(--transition-fast)}.btn-login[_ngcontent-%COMP%]:hover:after{transform:rotate(30deg) translate(20%,20%)}.btn-register[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(0,198,255,.3);color:var(--text-secondary);font-weight:500;padding:.75rem;border-radius:10px;transition:var(--transition-medium)}.btn-register[_ngcontent-%COMP%]:hover{background:#00c6ff1a;border-color:var(--gradient-accent-start);color:var(--text-primary);box-shadow:var(--glow-accent);transform:translateY(-2px)}.alert-danger[_ngcontent-%COMP%]{background:#ff6b6b26;border:1px solid rgba(255,107,107,.3);color:#ff6b6b;border-radius:10px;margin-top:1rem;animation:pulse 2s infinite}@media (max-width: 576px){.card-body[_ngcontent-%COMP%]{padding:2rem 1.5rem!important}.login-title[_ngcontent-%COMP%]{font-size:1.75rem}}']})};var N=class r{static \u0275fac=function(n){return new(n||r)};static \u0275cmp=p({type:r,selectors:[["app-login-page"]],decls:1,vars:0,template:function(n,t){n&1&&s(0,"app-login")},dependencies:[u],encapsulation:2})};export{N as LoginPage};
