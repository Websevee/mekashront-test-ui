import{a as w,b as d,c as I,d as B,e as D,f as T,g as N,h as P,i as M,j as q}from"./chunk-W2TWQDSU.js";import{D as m,F as a,H as u,I as r,J as l,K as b,L as p,M as s,N as F,P as f,U as y,V as h,W as S,aa as x,ca as R,w as o,y as g,z as v}from"./chunk-CYE4T7BN.js";var _=e=>({"is-invalid":e});function j(e,n){e&1&&(u(0,"div"),s(1,"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E"),r())}function O(e,n){if(e&1&&(u(0,"div",20),m(1,j,2,0,"div",21),r()),e&2){let t=p();o(),a("ngIf",t.f.username.errors.required)}}function U(e,n){e&1&&(u(0,"div"),s(1,"Email \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D"),r())}function V(e,n){e&1&&(u(0,"div"),s(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email"),r())}function L(e,n){if(e&1&&(u(0,"div",20),m(1,U,2,0,"div",21)(2,V,2,0,"div",21),r()),e&2){let t=p();o(),a("ngIf",t.f.email.errors.required),o(),a("ngIf",t.f.email.errors.email)}}function z(e,n){e&1&&(u(0,"div"),s(1,"\u041F\u0430\u0440\u043E\u043B\u044C \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D"),r())}function H(e,n){e&1&&(u(0,"div"),s(1,"\u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"),r())}function J(e,n){if(e&1&&(u(0,"div",20),m(1,z,2,0,"div",21)(2,H,2,0,"div",21),r()),e&2){let t=p();o(),a("ngIf",t.f.password.errors.required),o(),a("ngIf",t.f.password.errors.minlength)}}function K(e,n){e&1&&(u(0,"div"),s(1,"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u043E\u043B\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E"),r())}function Q(e,n){e&1&&(u(0,"div"),s(1,"\u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442"),r())}function W(e,n){if(e&1&&(u(0,"div",20),m(1,K,2,0,"div",21)(2,Q,2,0,"div",21),r()),e&2){let t=p();o(),a("ngIf",t.f.confirmPassword.errors.required),o(),a("ngIf",t.f.confirmPassword.errors.mustMatch)}}function X(e,n){if(e&1&&(u(0,"div",22),s(1),r()),e&2){let t=p();o(),F(t.error)}}var C=class e{constructor(n,t,i){this.formBuilder=n;this.authService=t;this.router=i}registerForm;submitted=!1;error="";ngOnInit(){this.registerForm=this.formBuilder.group({username:["",d.required],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",d.required]},{validators:this.mustMatch("password","confirmPassword")})}mustMatch(n,t){return i=>{let E=i.controls[n],c=i.controls[t];c.errors&&!c.errors.mustMatch||(E.value!==c.value?c.setErrors({mustMatch:!0}):c.setErrors(null))}}get f(){return this.registerForm.controls}onSubmit(){if(this.submitted=!0,this.registerForm.invalid)return;let n={username:this.registerForm.value.username,email:this.registerForm.value.email,password:this.registerForm.value.password};this.authService.register(n).subscribe({next:t=>{t&&this.router.navigate(["/login"])},error:t=>{this.error="Registration failed. Please try again."}})}static \u0275fac=function(t){return new(t||e)(g(P),g(q),g(x))};static \u0275cmp=v({type:e,selectors:[["app-register"]],decls:33,vars:18,consts:[[1,"row","justify-content-center"],[1,"col-md-6","col-lg-5"],[1,"card","shadow"],[1,"card-body","p-5"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"d-grid","gap-2","mb-3"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),s(5,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"),r(),u(6,"form",5),b("ngSubmit",function(){return i.onSubmit()}),u(7,"div",6)(8,"label",7),s(9,"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"),r(),l(10,"input",8),m(11,O,2,1,"div",9),r(),u(12,"div",6)(13,"label",10),s(14,"Email"),r(),l(15,"input",11),m(16,L,3,2,"div",9),r(),u(17,"div",6)(18,"label",12),s(19,"\u041F\u0430\u0440\u043E\u043B\u044C"),r(),l(20,"input",13),m(21,J,3,2,"div",9),r(),u(22,"div",6)(23,"label",14),s(24,"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u043E\u043B\u044F"),r(),l(25,"input",15),m(26,W,3,2,"div",9),r(),u(27,"div",16)(28,"button",17),s(29,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F"),r(),u(30,"button",18),b("click",function(){return i.router.navigate(["/login"])}),s(31,"\u0423\u0436\u0435 \u0435\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442? \u0412\u043E\u0439\u0442\u0438"),r()(),m(32,X,2,1,"div",19),r()()()()()),t&2&&(o(6),a("formGroup",i.registerForm),o(4),a("ngClass",f(10,_,i.submitted&&i.f.username.errors)),o(),a("ngIf",i.submitted&&i.f.username.errors),o(4),a("ngClass",f(12,_,i.submitted&&i.f.email.errors)),o(),a("ngIf",i.submitted&&i.f.email.errors),o(4),a("ngClass",f(14,_,i.submitted&&i.f.password.errors)),o(),a("ngIf",i.submitted&&i.f.password.errors),o(4),a("ngClass",f(16,_,i.submitted&&i.f.confirmPassword.errors)),o(),a("ngIf",i.submitted&&i.f.confirmPassword.errors),o(6),a("ngIf",i.error))},dependencies:[M,D,w,I,B,T,N,S,y,h,R],styles:['@charset "UTF-8";']})};var A=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-register-page"]],decls:1,vars:0,template:function(t,i){t&1&&l(0,"app-register")},dependencies:[C],encapsulation:2})};export{A as RegisterPage};
